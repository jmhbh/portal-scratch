apiVersion: apimanagement.gloo.solo.io/v2
kind: Portal
metadata:
  name: sample-bank-portal
  namespace: gloo-mesh
spec:
  domains:
  - "bank.portal.io"
  portalBackendSelector:
  - selector:
      namespace: gloo-mesh
      cluster: cluster-1
  usagePlans:
  - name: bronze
    displayName: "Bronze Plan"
    description: "A basic usage plan"
  - name: silver
    displayName: "Silver Plan"
    description: "A better usage plan"
  - name: gold
    displayName: "Gold Plan"
    description: "The best usage plan!"
  # Visibility setting for the APIs in the portal
  visibility:
    # This will be an enum and controls the default visibility for portal APIs
    state: Public
    # The following will be a oneOf private or public and we will validate that 
    # the specified label is the inverse of the state specified above and can be 
    # used on route tables to override API visibility
    privateLabel:
      portal-visibility: private
    publicLabel:
      portal-visibility: public
  apis:
  - routeTable:
      labels:
      - portal: sample-bank-portal
  groupClaimKey: groups
